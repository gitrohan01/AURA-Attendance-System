{% extends "attendance/base.html" %}
{% block title %}Reports â€” AURA{% endblock %}

{% block content %}

<h1 class="text-2xl font-bold text-sky-400 mb-8">ðŸ“Š Teacher Reports</h1>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

    <!-- ======================= CLASS REPORTS ======================= -->
    <div class="bg-white/5 p-6 rounded-xl hover:bg-white/10 transition border border-white/10 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ðŸ“˜ Class Reports</h2>
        <ul class="space-y-2">
            {% for c in classes %}
            <li>
                <a href="{% url 'teacher_report_class' c.id %}"
                   class="block bg-white/5 hover:bg-white/20 p-3 rounded">
                    {{ c.name }}{% if c.department %} â€” {{ c.department.name }}{% endif %}
                </a>
            </li>
            {% empty %}
            <p class="text-gray-400">No classes assigned.</p>
            {% endfor %}
        </ul>
    </div>

    <!-- ======================= SUBJECT REPORTS ======================= -->
    <div class="bg-white/5 p-6 rounded-xl hover:bg-white/10 transition border border-white/10 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ðŸ“š Subject Reports</h2>
        <ul class="space-y-2">
            {% for s in subjects %}
            <li>
                <a href="{% url 'teacher_report_subject' s.id %}"
                   class="block bg-white/5 hover:bg-white/20 p-3 rounded">
                    {{ s.name }} ({{ s.code }})
                </a>
            </li>
            {% empty %}
            <p class="text-gray-400">No subjects assigned.</p>
            {% endfor %}
        </ul>
    </div>

    <!-- ======================= STUDENT REPORT ======================= -->
    <div class="bg-white/5 p-6 rounded-xl hover:bg-white/10 transition border border-white/10 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ðŸ‘¤ Student Profile Report</h2>
        <p class="text-gray-400 text-sm mb-2">Enter a student ID to generate a full attendance profile.</p>
        <form method="get" action=""
      onsubmit="this.action='/teacher/reports/student/' + this.student.value + '/'">

            <input type="text" name="student" placeholder="Student ID"
                   class="w-full p-2 rounded bg-white/10 border border-white/20 text-white"
                   required />
            <button class="mt-3 px-4 py-2 bg-sky-500 hover:bg-sky-600 rounded w-full">
                ðŸ“„ Open Report
            </button>
        </form>
    </div>

    <!-- ======================= MONTHLY ANALYTICS ======================= -->
    <div class="bg-white/5 p-6 rounded-xl hover:bg-white/10 transition border border-white/10 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ðŸ“ˆ Monthly Analytics</h2>
        <p class="text-gray-400 text-sm mb-2">View monthly attendance patterns & heatmap.</p>
        <a href="{% url 'teacher_report_monthly' %}" 
           class="block bg-white/5 hover:bg-white/20 p-4 rounded text-center">
            Open Analytics Dashboard
        </a>
    </div>

    <!-- ======================= EXPORT CENTER ======================= -->
    <div class="bg-white/5 p-6 rounded-xl hover:bg-white/10 transition border border-white/10 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ðŸ“¥ Export Center</h2>
        <p class="text-gray-300">Bulk export for all classes & subjects.</p>
        <a class="block p-3 mt-4 bg-green-600 hover:bg-green-700 rounded text-center">
            ðŸš§ Coming Soon
        </a>
    </div>

    <!-- ======================= RED FLAG STUDENTS ======================= -->
    <div class="bg-red-500/10 p-6 rounded-xl border border-red-500/20 shadow-lg">
        <h2 class="text-xl font-semibold mb-4 text-red-400">ðŸš© Red Flag Students</h2>
        <p class="text-gray-300 text-sm mb-2">See students below attendance threshold.</p>
        <a href="/teacher/dashboard/#redflag"
           class="block bg-white/5 hover:bg-white/20 p-4 rounded text-center">
            View Risk Students
        </a>
    </div>

</div>

{% endblock %}
